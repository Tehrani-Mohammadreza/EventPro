@page "/login"
@using EventEasePro.Services
@inject AuthenticationService AuthenticationService
@inject NavigationManager NavigationManager

<h3>Login</h3>

<EditForm Model="@loginModel" OnValidSubmit="HandleLogin">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="username">Username</label>
        <input id="username" @bind="loginModel.Username" required />
    </div>

    <div class="form-group">
        <label for="password">Password</label>
        <input type="password" id="password" @bind="loginModel.Password" required />
    </div>

    <button type="submit" class="submit-button">Login</button>
</EditForm>

@code {
    private UserRegistration loginModel = new UserRegistration();

    private void HandleLogin()
    {
        AuthenticationService.Login(loginModel.Username);
        NavigationManager.NavigateTo("/events");
    }
}
